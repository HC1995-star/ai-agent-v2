<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradedoubler Onboarding Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .chat-message {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .pulse-loader {
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-96 bg-white shadow-lg p-6 overflow-y-auto">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Tradedoubler</h2>
                <p class="text-sm text-gray-600">AI Onboarding Assistant</p>
            </div>

            <!-- Program Info Badge (shown after session loads) -->
            <div id="program-info" class="hidden mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <h3 class="text-sm font-semibold text-blue-900 mb-3">Your Program</h3>
                <div class="text-xs text-blue-800 space-y-2">
                    <p><strong>Program ID:</strong> <span id="display-program-id" class="font-mono"></span></p>
                    <p><strong>Organization ID:</strong> <span id="display-org-id" class="font-mono"></span></p>
                    <p><strong>Event ID:</strong> <span id="display-event-id" class="font-mono"></span></p>
                    <div id="test-link-section" class="hidden mt-3 pt-3 border-t border-blue-200">
                        <p class="mb-1"><strong>Test Link:</strong></p>
                        <a id="display-test-link" href="#" target="_blank" class="text-blue-600 hover:text-blue-800 underline break-all text-xs"></a>
                    </div>
                    <p class="mt-3 pt-3 border-t border-blue-200"><strong>Status:</strong> <span class="text-green-600 font-medium">Ready âœ“</span></p>
                    <p id="scripts-ready" class="hidden text-green-600 font-medium text-xs">âœ“ Implementation scripts loaded</p>
                </div>
            </div>

            <!-- Loading Session Indicator -->
            <div id="session-loading" class="hidden mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 border-2 border-yellow-600 border-t-transparent rounded-full animate-spin"></div>
                    <span class="text-xs text-yellow-800 font-medium">Loading your program...</span>
                </div>
            </div>

            <!-- Progress bar -->
            <div class="mb-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-gray-700">Progress</span>
                    <span id="progress-percentage" class="text-sm font-medium text-blue-600">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>

            <!-- API Status -->
            <div id="api-status" class="hidden mb-6 p-3 rounded-lg">
                <div class="flex items-center gap-2">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    <span id="api-status-text" class="text-sm font-medium"></span>
                </div>
            </div>

            <!-- Checklist -->
            <div class="space-y-3 mb-6">
                <h3 class="text-sm font-semibold text-gray-700 mb-3">Onboarding Checklist</h3>
                
                <div id="checklist-intro" class="checklist-item flex items-center gap-3">
                    <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                    </svg>
                    <span class="text-sm text-gray-500">Confirm Details</span>
                </div>

                <div id="checklist-brandedTracking" class="checklist-item flex items-center gap-3">
                    <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                    </svg>
                    <span class="text-sm text-gray-500">DNS Configuration</span>
                </div>

                <div id="checklist-productFeed" class="checklist-item flex items-center gap-3">
                    <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                    </svg>
                    <span class="text-sm text-gray-500">Product Feed</span>
                </div>

                <div id="checklist-assets" class="checklist-item flex items-center gap-3">
                    <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                    </svg>
                    <span class="text-sm text-gray-500">Program Assets</span>
                </div>

                <div id="checklist-scripts" class="checklist-item flex items-center gap-3">
                    <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                    </svg>
                    <span class="text-sm text-gray-500">Implementation Scripts</span>
                </div>
            </div>

            <!-- File Upload Sections -->
            <div class="space-y-4 border-t border-gray-200 pt-6">
                <h3 class="text-sm font-semibold text-gray-700 mb-4">Upload Program Assets</h3>

                <!-- Logo Upload -->
                <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-xs font-medium text-gray-700">Logo</h4>
                        <span class="text-xs text-gray-500">350x130px</span>
                    </div>
                    <button onclick="document.getElementById('logo-input').click()" class="w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-xs">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        Upload Logo
                    </button>
                    <input type="file" id="logo-input" accept=".png,.jpg,.jpeg" class="hidden">
                    <div id="logo-list" class="mt-2 space-y-1"></div>
                </div>

                <!-- Banners Upload -->
                <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-xs font-medium text-gray-700">Banners</h4>
                        <span class="text-xs text-gray-500">Multiple</span>
                    </div>
                    <p class="text-xs text-gray-400 mb-2">160x600, 300x250, 300x600, 728x90, 928x70</p>
                    <button onclick="document.getElementById('banners-input').click()" class="w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-xs">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        Upload Banners
                    </button>
                    <input type="file" id="banners-input" accept=".jpg,.jpeg,.gif,.png" multiple class="hidden">
                    <div id="banners-list" class="mt-2 space-y-1"></div>
                </div>

                <!-- Terms & Conditions -->
                <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-xs font-medium text-gray-700">Terms & Conditions</h4>
                        <span class="text-xs text-gray-500">PDF</span>
                    </div>
                    <button onclick="document.getElementById('terms-input').click()" class="w-full flex items-center justify-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-xs">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Upload T&Cs
                    </button>
                    <input type="file" id="terms-input" accept=".pdf" class="hidden">
                    <div id="terms-list" class="mt-2 space-y-1"></div>
                </div>

                <!-- Send All Button -->
                <button id="send-all-files" class="w-full px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium shadow-md disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                    Send All Files
                </button>
            </div>

            <!-- Collected Data Summary -->
            <div class="mt-6 pt-6 border-t border-gray-200">
                <h3 class="text-sm font-semibold text-gray-700 mb-3">Program Details</h3>
                <div id="data-summary" class="text-xs text-gray-600 space-y-1">
                    <p>Loading...</p>
                </div>
            </div>
        </div>

        <!-- Chat area -->
        <div class="flex-1 flex flex-col">
            <!-- Chat messages -->
            <div id="chat-container" class="flex-1 overflow-y-auto p-6 space-y-4">
                <!-- Messages will be added here -->
            </div>

            <!-- Input area -->
            <div class="border-t border-gray-200 bg-white p-4">
                <div class="max-w-4xl mx-auto flex gap-3">
                    <input
                        type="text"
                        id="message-input"
                        placeholder="Type your message..."
                        class="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                    <button
                        id="send-btn"
                        class="px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURATION
        // ============================================
        const N8N_WEBHOOK_URL = 'https://harrytradedoubler2026.app.n8n.cloud/webhook/onboarding-chat';
        // ============================================

        // Get session ID from URL (ONLY PARAMETER NOW!)
        function getSessionId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('session') || params.get('sessionId') || params.get('sid');
        }

        const sessionId = getSessionId();

        // State management (will be populated by n8n)
        let conversationHistory = [];
        let onboardingData = {
            sessionLoaded: false
        };
        
        let checklist = {
            intro: false,
            brandedTracking: false,
            productFeed: false,
            assets: false,
            scripts: false
        };
        
        let uploadedFiles = {
            logo: [],
            banners: [],
            terms: []
        };

        // DOM elements
        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        const sendBtn = document.getElementById('send-btn');
        const sendAllFilesBtn = document.getElementById('send-all-files');
        const dataSummary = document.getElementById('data-summary');
        const apiStatus = document.getElementById('api-status');
        const apiStatusText = document.getElementById('api-status-text');
        const programInfo = document.getElementById('program-info');
        const sessionLoading = document.getElementById('session-loading');

        // File inputs
        const logoInput = document.getElementById('logo-input');
        const bannersInput = document.getElementById('banners-input');
        const termsInput = document.getElementById('terms-input');

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', initialize);

        function initialize() {
            // Show loading if we have a session ID
            if (sessionId) {
                sessionLoading.classList.remove('hidden');
            }

            // Initial greeting - session data will be loaded on first message
            const initialMessage = sessionId 
                ? "Hi! ðŸ‘‹ I'm loading your program details..." 
                : "Hi! ðŸ‘‹ I'm your Tradedoubler onboarding assistant.\n\nI'll help you set up your affiliate program step by step.\n\nLet's get started! What's your name and company?";

            conversationHistory.push({
                role: 'assistant',
                content: initialMessage
            });
            
            addMessageToChat('assistant', initialMessage);

            // If we have a session, send an initial "hello" to trigger session load
            if (sessionId) {
                setTimeout(() => {
                    messageInput.value = "Hello";
                    sendMessage();
                }, 500);
            }
        }

        // Event listeners
        sendBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        logoInput.addEventListener('change', (e) => handleFileUpload(e, 'logo', 'logo-list'));
        bannersInput.addEventListener('change', (e) => handleFileUpload(e, 'banners', 'banners-list'));
        termsInput.addEventListener('change', (e) => handleFileUpload(e, 'terms', 'terms-list'));
        
        sendAllFilesBtn.addEventListener('click', sendAllFiles);

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || sendBtn.disabled) return;

            messageInput.disabled = true;
            sendBtn.disabled = true;

            addMessageToChat('user', message);
            conversationHistory.push({ role: 'user', content: message });
            messageInput.value = '';

            const loadingId = addLoadingIndicator();

            try {
                const response = await fetch(N8N_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        sessionId: sessionId, // Pass session ID to n8n
                        message: message,
                        conversationHistory: conversationHistory,
                        onboardingData: onboardingData,
                        checklist: checklist,
                        uploadedFiles: uploadedFiles
                    })
                });

                const data = await response.json();

                removeLoadingIndicator(loadingId);

                // Hide session loading indicator
                sessionLoading.classList.add('hidden');

                addMessageToChat('assistant', data.response);
                conversationHistory.push({ role: 'assistant', content: data.response });

                if (data.onboardingData) {
                    const wasFirstLoad = !onboardingData.sessionLoaded && data.onboardingData.sessionLoaded;
                    
                    onboardingData = { ...onboardingData, ...data.onboardingData };
                    updateDataSummary();
                    
                    // If session just loaded, show program info
                    if (wasFirstLoad) {
                        showProgramInfo(onboardingData);
                    }
                    
                    if (data.onboardingData.filesUploaded) {
                        showApiStatus('success', 'All Files Uploaded!');
                        uploadedFiles = { logo: [], banners: [], terms: [] };
                        clearAllFileLists();
                        updateSendAllButton();
                    }
                }
                if (data.checklist) {
                    checklist = { ...checklist, ...data.checklist };
                    updateChecklist(checklist);
                }

            } catch (error) {
                console.error('Error:', error);
                removeLoadingIndicator(loadingId);
                sessionLoading.classList.add('hidden');
                addMessageToChat('assistant', 'I apologize, but I encountered an error. Please try again.');
            } finally {
                messageInput.disabled = false;
                sendBtn.disabled = false;
                messageInput.focus();
            }
        }

        function showProgramInfo(data) {
            if (data.programId && data.organizationId) {
                programInfo.classList.remove('hidden');
                document.getElementById('display-program-id').textContent = data.programId;
                document.getElementById('display-org-id').textContent = data.organizationId;
                document.getElementById('display-event-id').textContent = data.eventId || 'N/A';
                
                if (data.testLink) {
                    document.getElementById('test-link-section').classList.remove('hidden');
                    const linkEl = document.getElementById('display-test-link');
                    linkEl.textContent = data.testLink;
                    linkEl.href = data.testLink;
                }
                
                if (data.scriptsReady || data.landingScript || data.confirmationScript) {
                    document.getElementById('scripts-ready').classList.remove('hidden');
                }
            }
        }

        function handleFileUpload(event, category, listId) {
            const files = Array.from(event.target.files);
            if (files.length === 0) return;

            const listElement = document.getElementById(listId);

            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    uploadedFiles[category].push({
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        data: e.target.result.split(',')[1],
                        category: category
                    });
                    
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'text-xs text-gray-600 flex items-center gap-2 p-1.5 bg-white rounded border border-gray-200';
                    fileDiv.innerHTML = `
                        <svg class="w-3 h-3 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                        <span class="flex-1 truncate text-xs">${file.name}</span>
                    `;
                    listElement.appendChild(fileDiv);
                    
                    updateSendAllButton();
                };
                reader.readAsDataURL(file);
            });

            event.target.value = '';
        }

        function clearAllFileLists() {
            document.getElementById('logo-list').innerHTML = '';
            document.getElementById('banners-list').innerHTML = '';
            document.getElementById('terms-list').innerHTML = '';
        }

        function updateSendAllButton() {
            const totalFiles = Object.values(uploadedFiles).reduce((sum, arr) => sum + arr.length, 0);
            sendAllFilesBtn.disabled = totalFiles === 0;
            sendAllFilesBtn.textContent = totalFiles > 0 ? `Send All Files (${totalFiles})` : 'Send All Files';
        }

        async function sendAllFiles() {
            const totalFiles = Object.values(uploadedFiles).reduce((sum, arr) => sum + arr.length, 0);
            if (totalFiles === 0) return;

            const filesSummary = Object.entries(uploadedFiles)
                .filter(([_, files]) => files.length > 0)
                .map(([category, files]) => `${category}: ${files.length}`)
                .join(', ');

            messageInput.value = `I'm uploading ${totalFiles} files: ${filesSummary}`;
            await sendMessage();
        }

        function addMessageToChat(role, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${role === 'user' ? 'justify-end' : 'justify-start'}`;
            
            const bubble = document.createElement('div');
            bubble.className = `max-w-2xl rounded-2xl px-4 py-3 chat-message ${
                role === 'user' 
                    ? 'bg-blue-600 text-white' 
                    : 'bg-white shadow-md text-gray-800'
            }`;
            
            const formattedContent = content.split('\n').map(line => {
                if (line.startsWith('â€¢') || line.startsWith('-')) {
                    return `<p class="ml-4">${line}</p>`;
                } else if (line.startsWith('âœ“')) {
                    return `<p class="font-medium text-green-600">${line}</p>`;
                }
                return line ? `<p class="mb-1">${line}</p>` : '<p class="mb-1"></p>';
            }).join('');
            
            bubble.innerHTML = formattedContent;
            messageDiv.appendChild(bubble);
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function addLoadingIndicator() {
            const loadingId = 'loading_' + Date.now();
            const messageDiv = document.createElement('div');
            messageDiv.id = loadingId;
            messageDiv.className = 'flex justify-start';
            
            const bubble = document.createElement('div');
            bubble.className = 'bg-white shadow-md rounded-2xl px-4 py-3';
            bubble.innerHTML = `
                <div class="flex gap-1">
                    <div class="w-2 h-2 bg-blue-600 rounded-full pulse-loader"></div>
                    <div class="w-2 h-2 bg-blue-600 rounded-full pulse-loader" style="animation-delay: 0.2s"></div>
                    <div class="w-2 h-2 bg-blue-600 rounded-full pulse-loader" style="animation-delay: 0.4s"></div>
                </div>
            `;
            
            messageDiv.appendChild(bubble);
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            return loadingId;
        }

        function removeLoadingIndicator(loadingId) {
            const element = document.getElementById(loadingId);
            if (element) element.remove();
        }

        function updateChecklist(checklistData) {
            const items = ['intro', 'brandedTracking', 'productFeed', 'assets', 'scripts'];
            let completed = 0;

            items.forEach(item => {
                const element = document.getElementById(`checklist-${item}`);
                if (checklistData[item]) {
                    element.querySelector('svg').innerHTML = `
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" fill="currentColor"/>
                    `;
                    element.querySelector('svg').classList.remove('text-gray-300');
                    element.querySelector('svg').classList.add('text-green-500');
                    element.querySelector('span').classList.remove('text-gray-500');
                    element.querySelector('span').classList.add('text-gray-700', 'font-medium');
                    completed++;
                }
            });

            const percentage = Math.round((completed / items.length) * 100);
            document.getElementById('progress-percentage').textContent = `${percentage}%`;
            document.getElementById('progress-bar').style.width = `${percentage}%`;
        }

        function updateDataSummary() {
            const summary = [];
            
            if (onboardingData.programId) {
                summary.push(`<p><strong>Program ID:</strong> ${onboardingData.programId}</p>`);
            }
            if (onboardingData.organizationId) {
                summary.push(`<p><strong>Org ID:</strong> ${onboardingData.organizationId}</p>`);
            }
            if (onboardingData.eventId) {
                summary.push(`<p><strong>Event ID:</strong> ${onboardingData.eventId}</p>`);
            }
            if (onboardingData.clientName) {
                summary.push(`<p><strong>Client:</strong> ${onboardingData.clientName}</p>`);
            }
            if (onboardingData.companyName) {
                summary.push(`<p><strong>Company:</strong> ${onboardingData.companyName}</p>`);
            }
            if (onboardingData.email) {
                summary.push(`<p><strong>Email:</strong> ${onboardingData.email}</p>`);
            }
            if (onboardingData.brandedTracking?.visit) {
                summary.push(`<p><strong>Visit:</strong> ${onboardingData.brandedTracking.visit}</p>`);
            }
            if (onboardingData.brandedTracking?.statics) {
                summary.push(`<p><strong>Statics:</strong> ${onboardingData.brandedTracking.statics}</p>`);
            }
            if (onboardingData.productFeedUrl) {
                summary.push(`<p><strong>Feed:</strong> ${onboardingData.productFeedUrl.substring(0, 30)}...</p>`);
            }
            if (onboardingData.scriptsReady || onboardingData.landingScript) {
                summary.push(`<p class="text-green-600"><strong>âœ“ Scripts Ready</strong></p>`);
            }
            if (onboardingData.filesUploaded) {
                summary.push(`<p class="text-green-600"><strong>âœ“ Assets Uploaded</strong></p>`);
            }

            dataSummary.innerHTML = summary.length > 0 ? summary.join('') : '<p>No data yet</p>';
        }

        function showApiStatus(type, message) {
            apiStatus.className = `mb-6 p-3 rounded-lg ${type === 'success' ? 'bg-green-50 text-green-800' : 'bg-orange-50 text-orange-800'}`;
            apiStatusText.textContent = message;
            apiStatus.classList.remove('hidden');
            
            setTimeout(() => {
                apiStatus.classList.add('hidden');
            }, 5000);
        }
    </script>
</body>
</html>
